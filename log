Requirements satisfied!

[0m[1mInitializing the backend...[0m
[0m[1mInitializing modules...[0m

[0m[1mInitializing provider plugins...[0m
- Reusing previous version of hashicorp/aws from the dependency lock file
- Using previously-installed hashicorp/aws v4.61.0

[0m[1m[32mTerraform has been successfully initialized![0m[32m[0m
[0m[32m
You may now begin working with Terraform. Try running "terraform plan" to see
any changes that are required for your infrastructure. All Terraform commands
should now work.

If you ever set or change modules or backend configuration for Terraform,
rerun this command to reinitialize your working directory. If you forget, other
commands will detect it and remind you to do so if necessary.[0m
[33mâ•·[0m[0m
[33mâ”‚[0m [0m[1m[33mWarning: [0m[0m[1mArgument is deprecated[0m
[33mâ”‚[0m [0m
[33mâ”‚[0m [0m[0m  with aws_s3_bucket.s3canner_log_bucket,
[33mâ”‚[0m [0m  on s3.tf line 21, in resource "aws_s3_bucket" "s3canner_log_bucket":
[33mâ”‚[0m [0m  21: resource "aws_s3_bucket" "s3canner_log_bucket" [4m{[0m[0m
[33mâ”‚[0m [0m
[33mâ”‚[0m [0mUse the aws_s3_bucket_versioning resource instead
[33mâ”‚[0m [0m
[33mâ”‚[0m [0m(and 4 more similar warnings elsewhere)
[33mâ•µ[0m[0m
[32m[1mSuccess![0m The configuration is valid, but there were some
validation warnings as shown above.
[0m
[0m[1maws_iam_policy.lambda_policy: Refreshing state... [id=arn:aws:iam::375140005095:policy/lambda_policy_20230405115520126500000001][0m
[0m[1maws_s3_bucket.s3canner_binaries: Refreshing state... [id=hg.s3canner-binaries.eu-central-1][0m
[0m[1mmodule.s3canner_dispatcher.data.aws_iam_policy_document.lambda_execution_policy[0]: Reading...[0m[0m
[0m[1maws_cloudwatch_event_rule.dispatch_cronjob: Refreshing state... [id=hg_s3canner_dispatch_cronjob][0m
[0m[1mmodule.s3canner_dispatcher.aws_cloudwatch_log_group.lambda_log_group[0]: Refreshing state... [id=/aws/lambda/hg_s3canner_dispatcher][0m
[0m[1mdata.aws_iam_policy_document.base_policy: Reading...[0m[0m
[0m[1maws_dynamodb_table.s3canner_yara_matches: Refreshing state... [id=hg_s3canner_matches][0m
[0m[1mdata.aws_iam_policy_document.base_policy: Read complete after 0s [id=3013719987][0m
[0m[1mmodule.s3canner_dispatcher.data.aws_iam_policy_document.lambda_execution_policy[0]: Read complete after 0s [id=1008248811][0m
[0m[1maws_sns_topic.metric_alarms: Refreshing state... [id=arn:aws:sns:eu-central-1:375140005095:hg_s3canner_metric_alarms][0m
[0m[1maws_sqs_queue.s3_object_queue: Refreshing state... [id=https://sqs.eu-central-1.amazonaws.com/375140005095/hg_s3canner_s3_object_queue][0m
[0m[1mmodule.s3canner_batcher.data.aws_iam_policy_document.lambda_execution_policy[0]: Reading...[0m[0m
[0m[1maws_sns_topic.yara_match_alerts: Refreshing state... [id=arn:aws:sns:eu-central-1:375140005095:hg_s3canner_yara_match_alerts][0m
[0m[1mmodule.s3canner_batcher.data.aws_iam_policy_document.lambda_execution_policy[0]: Read complete after 0s [id=1008248811][0m
[0m[1mmodule.s3canner_analyzer.data.aws_iam_policy_document.lambda_execution_policy[0]: Reading...[0m[0m
[0m[1mmodule.s3canner_analyzer.aws_cloudwatch_log_group.lambda_log_group[0]: Refreshing state... [id=/aws/lambda/hg_s3canner_analyzer][0m
[0m[1mmodule.s3canner_analyzer.data.aws_iam_policy_document.lambda_execution_policy[0]: Read complete after 0s [id=1008248811][0m
[0m[1maws_s3_bucket.s3canner_log_bucket[0]: Refreshing state... [id=hg.s3canner-binaries.eu-central-1.access-logs][0m
[0m[1mmodule.s3canner_batcher.aws_cloudwatch_log_group.lambda_log_group[0]: Refreshing state... [id=/aws/lambda/hg_s3canner_batcher][0m
[0m[1maws_iam_policy.base_policy: Refreshing state... [id=arn:aws:iam::375140005095:policy/hg_s3canner_base_policy][0m
[0m[1mmodule.s3canner_dispatcher.aws_iam_role.role[0]: Refreshing state... [id=hg_s3canner_dispatcher_role][0m
[0m[1mmodule.s3canner_analyzer.aws_iam_role.role[0]: Refreshing state... [id=hg_s3canner_analyzer_role][0m
[0m[1mmodule.s3canner_batcher.aws_iam_role.role[0]: Refreshing state... [id=hg_s3canner_batcher_role][0m
[0m[1maws_cloudwatch_metric_alarm.sqs_age: Refreshing state... [id=hg_s3canner_s3_object_queue_old_age][0m
[0m[1maws_iam_role_policy_attachment.lambda_policy_attachment: Refreshing state... [id=hg_s3canner_dispatcher_role-20230405115520777600000004][0m
[0m[1maws_cloudwatch_metric_alarm.dynamo_throttles: Refreshing state... [id=hg_s3canner_matches_throttles][0m
[0m[1mmodule.s3canner_analyzer.aws_iam_role_policy_attachment.attach_base_policy[0]: Refreshing state... [id=hg_s3canner_analyzer_role-20230405115520606300000003][0m
[0m[1mmodule.s3canner_dispatcher.aws_iam_role_policy_attachment.attach_base_policy[0]: Refreshing state... [id=hg_s3canner_dispatcher_role-20230405115520513100000002][0m
[0m[1mmodule.s3canner_batcher.aws_iam_role_policy_attachment.attach_base_policy[0]: Refreshing state... [id=hg_s3canner_batcher_role-20230405115520842800000005][0m
[0m[1maws_s3_bucket_public_access_block.block_s3canner_log_bucket: Refreshing state... [id=hg.s3canner-binaries.eu-central-1.access-logs][0m
[0m[1maws_s3_bucket_public_access_block.block_s3canner_binaries_bucket: Refreshing state... [id=hg.s3canner-binaries.eu-central-1][0m
[0m[1mdata.aws_iam_policy_document.s3canner_analyzer_policy: Reading...[0m[0m
[0m[1mdata.aws_iam_policy_document.s3_object_queue_policy: Reading...[0m[0m
[0m[1mdata.aws_iam_policy_document.s3_object_queue_policy: Read complete after 0s [id=826639504][0m
[0m[1mmodule.s3canner_analyzer.aws_lambda_function.function[0]: Refreshing state... [id=hg_s3canner_analyzer][0m
[0m[1mmodule.s3canner_batcher.aws_lambda_function.function[0]: Refreshing state... [id=hg_s3canner_batcher][0m
[0m[1maws_sqs_queue_policy.s3_object_queue_policy: Refreshing state... [id=https://sqs.eu-central-1.amazonaws.com/375140005095/hg_s3canner_s3_object_queue][0m
[0m[1mdata.aws_iam_policy_document.s3canner_analyzer_policy: Read complete after 0s [id=3396666421][0m
[0m[1maws_iam_role_policy.s3canner_analyzer_policy: Refreshing state... [id=hg_s3canner_analyzer_role:hg_s3canner_analyzer_policy][0m
[0m[1maws_s3_bucket_notification.bucket_notification: Refreshing state... [id=hg.s3canner-binaries.eu-central-1][0m
[0m[1maws_s3_bucket_notification.lambda_bucket_notification: Refreshing state... [id=hg.s3canner-binaries.eu-central-1][0m
[0m[1maws_cloudwatch_metric_alarm.batch_enqueue_errors: Refreshing state... [id=hg_s3canner_batcher_enqueue_errors][0m
[0m[1mmodule.s3canner_batcher.aws_lambda_alias.production_alias[0]: Refreshing state... [id=arn:aws:lambda:eu-central-1:375140005095:function:hg_s3canner_batcher:Production][0m
[0m[1mdata.aws_iam_policy_document.s3canner_batcher_policy: Reading...[0m[0m
[0m[1maws_lambda_permission.allow_s3_trigger: Refreshing state... [id=AllowExecutionFromS3Bucket][0m
[0m[1mdata.aws_iam_policy_document.s3canner_batcher_policy: Read complete after 0s [id=1757438080][0m
[0m[1maws_iam_role_policy.s3canner_batcher_policy: Refreshing state... [id=hg_s3canner_batcher_role:hg_s3canner_batcher_policy][0m
[0m[1maws_cloudwatch_metric_alarm.analyzed_binaries: Refreshing state... [id=hg_s3canner_analyzer_no_analyzed_binaries][0m
[0m[1maws_cloudwatch_metric_alarm.yara_rules: Refreshing state... [id=hg_s3canner_analyzer_too_few_yara_rules][0m
[0m[1mmodule.s3canner_analyzer.aws_lambda_alias.production_alias[0]: Refreshing state... [id=arn:aws:lambda:eu-central-1:375140005095:function:hg_s3canner_analyzer:Production][0m
[0m[1mdata.aws_iam_policy_document.s3canner_dispatcher_policy: Reading...[0m[0m
[0m[1mdata.aws_iam_policy_document.s3canner_dispatcher_policy: Read complete after 0s [id=815314131][0m
[0m[1maws_iam_role_policy.s3canner_dispatcher_policy: Refreshing state... [id=hg_s3canner_dispatcher_role:hg_s3canner_dispatcher_policy][0m
[0m[1mmodule.s3canner_batcher.aws_cloudwatch_metric_alarm.lambda_errors[0]: Refreshing state... [id=hg_s3canner_batcher_errors][0m
[0m[1mmodule.s3canner_batcher.aws_cloudwatch_metric_alarm.lambda_throttles[0]: Refreshing state... [id=hg_s3canner_batcher_throttles][0m
[0m[1mmodule.s3canner_analyzer.aws_cloudwatch_metric_alarm.lambda_errors[0]: Refreshing state... [id=hg_s3canner_analyzer_errors][0m
[0m[1mmodule.s3canner_analyzer.aws_cloudwatch_metric_alarm.lambda_throttles[0]: Refreshing state... [id=hg_s3canner_analyzer_throttles][0m
[0m[1mmodule.s3canner_dispatcher.aws_lambda_function.function[0]: Refreshing state... [id=hg_s3canner_dispatcher][0m
[0m[1mmodule.s3canner_dispatcher.aws_lambda_alias.production_alias[0]: Refreshing state... [id=arn:aws:lambda:eu-central-1:375140005095:function:hg_s3canner_dispatcher:Production][0m
[0m[1maws_lambda_permission.allow_cloudwatch_to_invoke_dispatch: Refreshing state... [id=AllowExecutionFromCloudWatch_hg_s3canner_dispatcher][0m
[0m[1mmodule.s3canner_dispatcher.aws_cloudwatch_metric_alarm.lambda_errors[0]: Refreshing state... [id=hg_s3canner_dispatcher_errors][0m
[0m[1mmodule.s3canner_dispatcher.aws_cloudwatch_metric_alarm.lambda_throttles[0]: Refreshing state... [id=hg_s3canner_dispatcher_throttles][0m
[0m[1maws_cloudwatch_event_target.invoke_dispatch_lambda: Refreshing state... [id=hg_s3canner_dispatch_cronjob-hg_s3canner_dispatch_to_lambda][0m

Terraform used the selected providers to generate the following execution
plan. Resource actions are indicated with the following symbols:
  [33m~[0m update in-place[0m

Terraform will perform the following actions:

[1m  # aws_s3_bucket_notification.bucket_notification[0m will be updated in-place
[0m  [33m~[0m[0m resource "aws_s3_bucket_notification" "bucket_notification" {
        id          = "hg.s3canner-binaries.eu-central-1"
        [90m# (2 unchanged attributes hidden)[0m[0m

      [31m-[0m[0m lambda_function {
          [31m-[0m[0m events              = [
              [31m-[0m[0m "s3:ObjectCreated:*",
            ] [90m-> null[0m[0m
          [31m-[0m[0m id                  = "tf-s3-lambda-20230405205512421200000001" [90m-> null[0m[0m
          [31m-[0m[0m lambda_function_arn = "arn:aws:lambda:eu-central-1:375140005095:function:hg_s3canner_batcher" [90m-> null[0m[0m
        }

      [32m+[0m[0m queue {
          [32m+[0m[0m events    = [
              [32m+[0m[0m "s3:ObjectCreated:*",
            ]
          [32m+[0m[0m queue_arn = "arn:aws:sqs:eu-central-1:375140005095:hg_s3canner_s3_object_queue"
        }
    }

[1m  # module.s3canner_analyzer.aws_lambda_alias.production_alias[0][0m will be updated in-place
[0m  [33m~[0m[0m resource "aws_lambda_alias" "production_alias" {
      [33m~[0m[0m function_version = "34" -> (known after apply)
        id               = "arn:aws:lambda:eu-central-1:375140005095:function:hg_s3canner_analyzer:Production"
        name             = "Production"
        [90m# (3 unchanged attributes hidden)[0m[0m
    }

[1m  # module.s3canner_analyzer.aws_lambda_function.function[0][0m will be updated in-place
[0m  [33m~[0m[0m resource "aws_lambda_function" "function" {
        id                             = "hg_s3canner_analyzer"
      [33m~[0m[0m last_modified                  = "2023-04-05T20:54:52.000+0000" -> (known after apply)
      [33m~[0m[0m qualified_arn                  = "arn:aws:lambda:eu-central-1:375140005095:function:hg_s3canner_analyzer:34" -> (known after apply)
      [33m~[0m[0m qualified_invoke_arn           = "arn:aws:apigateway:eu-central-1:lambda:path/2015-03-31/functions/arn:aws:lambda:eu-central-1:375140005095:function:hg_s3canner_analyzer:34/invocations" -> (known after apply)
      [33m~[0m[0m source_code_hash               = "mBiCFIWOzwoCCyr4ASlX9qNUeoda0eTFq0wyPGXRwIQ=" [33m->[0m[0m "w655LrF0h1nipEURZKdcatky5zEcSGzjw1g8DT+yHqk="
        tags                           = {
            "Name" = "S3canner"
        }
      [33m~[0m[0m version                        = "34" -> (known after apply)
        [90m# (18 unchanged attributes hidden)[0m[0m

        [90m# (3 unchanged blocks hidden)[0m[0m
    }

[1mPlan:[0m 0 to add, 3 to change, 0 to destroy.
[0m[0m[1maws_s3_bucket_notification.bucket_notification: Modifying... [id=hg.s3canner-binaries.eu-central-1][0m[0m
[0m[1mmodule.s3canner_analyzer.aws_lambda_function.function[0]: Modifying... [id=hg_s3canner_analyzer][0m[0m
[0m[1maws_s3_bucket_notification.bucket_notification: Modifications complete after 0s [id=hg.s3canner-binaries.eu-central-1][0m
[0m[1mmodule.s3canner_analyzer.aws_lambda_function.function[0]: Modifications complete after 6s [id=hg_s3canner_analyzer][0m
[0m[1mmodule.s3canner_analyzer.aws_lambda_alias.production_alias[0]: Modifying... [id=arn:aws:lambda:eu-central-1:375140005095:function:hg_s3canner_analyzer:Production][0m[0m
[0m[1mmodule.s3canner_analyzer.aws_lambda_alias.production_alias[0]: Modifications complete after 0s [id=arn:aws:lambda:eu-central-1:375140005095:function:hg_s3canner_analyzer:Production][0m
[33mâ•·[0m[0m
[33mâ”‚[0m [0m[1m[33mWarning: [0m[0m[1mArgument is deprecated[0m
[33mâ”‚[0m [0m
[33mâ”‚[0m [0m[0m  with aws_s3_bucket.s3canner_log_bucket,
[33mâ”‚[0m [0m  on s3.tf line 21, in resource "aws_s3_bucket" "s3canner_log_bucket":
[33mâ”‚[0m [0m  21: resource "aws_s3_bucket" "s3canner_log_bucket" [4m{[0m[0m
[33mâ”‚[0m [0m
[33mâ”‚[0m [0mUse the aws_s3_bucket_versioning resource instead
[33mâ”‚[0m [0m
[33mâ”‚[0m [0m(and 12 more similar warnings elsewhere)
[33mâ•µ[0m[0m
[0m[1m[32m
Apply complete! Resources: 0 added, 3 changed, 0 destroyed.
[0m[0m[1mmodule.s3canner_analyzer.aws_cloudwatch_log_group.lambda_log_group[0]: Refreshing state... [id=/aws/lambda/hg_s3canner_analyzer][0m
[0m[1mdata.aws_iam_policy_document.base_policy: Reading...[0m[0m
[0m[1maws_cloudwatch_event_rule.dispatch_cronjob: Refreshing state... [id=hg_s3canner_dispatch_cronjob][0m
[0m[1mmodule.s3canner_dispatcher.aws_cloudwatch_log_group.lambda_log_group[0]: Refreshing state... [id=/aws/lambda/hg_s3canner_dispatcher][0m
[0m[1maws_sns_topic.yara_match_alerts: Refreshing state... [id=arn:aws:sns:eu-central-1:375140005095:hg_s3canner_yara_match_alerts][0m
[0m[1mmodule.s3canner_dispatcher.data.aws_iam_policy_document.lambda_execution_policy[0]: Reading...[0m[0m
[0m[1mmodule.s3canner_dispatcher.data.aws_iam_policy_document.lambda_execution_policy[0]: Read complete after 0s [id=1008248811][0m
[0m[1mdata.aws_iam_policy_document.base_policy: Read complete after 0s [id=3013719987][0m
[0m[1mmodule.s3canner_batcher.data.aws_iam_policy_document.lambda_execution_policy[0]: Reading...[0m[0m
[0m[1maws_dynamodb_table.s3canner_yara_matches: Refreshing state... [id=hg_s3canner_matches][0m
[0m[1mmodule.s3canner_batcher.data.aws_iam_policy_document.lambda_execution_policy[0]: Read complete after 0s [id=1008248811][0m
[0m[1maws_iam_policy.lambda_policy: Refreshing state... [id=arn:aws:iam::375140005095:policy/lambda_policy_20230405115520126500000001][0m
[0m[1maws_sqs_queue.s3_object_queue: Refreshing state... [id=https://sqs.eu-central-1.amazonaws.com/375140005095/hg_s3canner_s3_object_queue][0m
[0m[1mmodule.s3canner_batcher.aws_cloudwatch_log_group.lambda_log_group[0]: Refreshing state... [id=/aws/lambda/hg_s3canner_batcher][0m
[0m[1maws_sns_topic.metric_alarms: Refreshing state... [id=arn:aws:sns:eu-central-1:375140005095:hg_s3canner_metric_alarms][0m
[0m[1mmodule.s3canner_analyzer.data.aws_iam_policy_document.lambda_execution_policy[0]: Reading...[0m[0m
[0m[1maws_s3_bucket.s3canner_log_bucket[0]: Refreshing state... [id=hg.s3canner-binaries.eu-central-1.access-logs][0m
[0m[1mmodule.s3canner_analyzer.data.aws_iam_policy_document.lambda_execution_policy[0]: Read complete after 0s [id=1008248811][0m
[0m[1maws_iam_policy.base_policy: Refreshing state... [id=arn:aws:iam::375140005095:policy/hg_s3canner_base_policy][0m
[0m[1mmodule.s3canner_batcher.aws_iam_role.role[0]: Refreshing state... [id=hg_s3canner_batcher_role][0m
[0m[1maws_s3_bucket.s3canner_binaries: Refreshing state... [id=hg.s3canner-binaries.eu-central-1][0m
[0m[1maws_cloudwatch_metric_alarm.dynamo_throttles: Refreshing state... [id=hg_s3canner_matches_throttles][0m
[0m[1maws_cloudwatch_metric_alarm.sqs_age: Refreshing state... [id=hg_s3canner_s3_object_queue_old_age][0m
[0m[1mmodule.s3canner_analyzer.aws_iam_role.role[0]: Refreshing state... [id=hg_s3canner_analyzer_role][0m
[0m[1mmodule.s3canner_dispatcher.aws_iam_role.role[0]: Refreshing state... [id=hg_s3canner_dispatcher_role][0m
[0m[1maws_iam_role_policy_attachment.lambda_policy_attachment: Refreshing state... [id=hg_s3canner_dispatcher_role-20230405115520777600000004][0m
[0m[1maws_s3_bucket_public_access_block.block_s3canner_log_bucket: Refreshing state... [id=hg.s3canner-binaries.eu-central-1.access-logs][0m
[0m[1maws_s3_bucket_public_access_block.block_s3canner_binaries_bucket: Refreshing state... [id=hg.s3canner-binaries.eu-central-1][0m
[0m[1mdata.aws_iam_policy_document.s3canner_analyzer_policy: Reading...[0m[0m
[0m[1mdata.aws_iam_policy_document.s3_object_queue_policy: Reading...[0m[0m
[0m[1mdata.aws_iam_policy_document.s3_object_queue_policy: Read complete after 0s [id=826639504][0m
[0m[1maws_sqs_queue_policy.s3_object_queue_policy: Refreshing state... [id=https://sqs.eu-central-1.amazonaws.com/375140005095/hg_s3canner_s3_object_queue][0m
[0m[1mdata.aws_iam_policy_document.s3canner_analyzer_policy: Read complete after 0s [id=3396666421][0m
[0m[1maws_s3_bucket_notification.bucket_notification: Refreshing state... [id=hg.s3canner-binaries.eu-central-1][0m
[0m[1mmodule.s3canner_batcher.aws_iam_role_policy_attachment.attach_base_policy[0]: Refreshing state... [id=hg_s3canner_batcher_role-20230405115520842800000005][0m
[0m[1mmodule.s3canner_batcher.aws_lambda_function.function[0]: Refreshing state... [id=hg_s3canner_batcher][0m
[0m[1mmodule.s3canner_dispatcher.aws_iam_role_policy_attachment.attach_base_policy[0]: Refreshing state... [id=hg_s3canner_dispatcher_role-20230405115520513100000002][0m
[0m[1maws_s3_bucket_notification.lambda_bucket_notification: Refreshing state... [id=hg.s3canner-binaries.eu-central-1][0m
[0m[1maws_lambda_permission.allow_s3_trigger: Refreshing state... [id=AllowExecutionFromS3Bucket][0m
[0m[1mmodule.s3canner_batcher.aws_lambda_alias.production_alias[0]: Refreshing state... [id=arn:aws:lambda:eu-central-1:375140005095:function:hg_s3canner_batcher:Production][0m
[0m[1mdata.aws_iam_policy_document.s3canner_batcher_policy: Reading...[0m[0m
[0m[1maws_cloudwatch_metric_alarm.batch_enqueue_errors: Refreshing state... [id=hg_s3canner_batcher_enqueue_errors][0m
[0m[1mdata.aws_iam_policy_document.s3canner_batcher_policy: Read complete after 0s [id=1757438080][0m
[0m[1maws_iam_role_policy.s3canner_batcher_policy: Refreshing state... [id=hg_s3canner_batcher_role:hg_s3canner_batcher_policy][0m
[0m[1mmodule.s3canner_batcher.aws_cloudwatch_metric_alarm.lambda_throttles[0]: Refreshing state... [id=hg_s3canner_batcher_throttles][0m
[0m[1mmodule.s3canner_batcher.aws_cloudwatch_metric_alarm.lambda_errors[0]: Refreshing state... [id=hg_s3canner_batcher_errors][0m
[0m[1mmodule.s3canner_analyzer.aws_iam_role_policy_attachment.attach_base_policy[0]: Refreshing state... [id=hg_s3canner_analyzer_role-20230405115520606300000003][0m
[0m[1maws_iam_role_policy.s3canner_analyzer_policy: Refreshing state... [id=hg_s3canner_analyzer_role:hg_s3canner_analyzer_policy][0m
[0m[1mmodule.s3canner_analyzer.aws_lambda_function.function[0]: Refreshing state... [id=hg_s3canner_analyzer][0m
[0m[1mmodule.s3canner_analyzer.aws_lambda_alias.production_alias[0]: Refreshing state... [id=arn:aws:lambda:eu-central-1:375140005095:function:hg_s3canner_analyzer:Production][0m
[0m[1maws_cloudwatch_metric_alarm.yara_rules: Refreshing state... [id=hg_s3canner_analyzer_too_few_yara_rules][0m
[0m[1mdata.aws_iam_policy_document.s3canner_dispatcher_policy: Reading...[0m[0m
[0m[1mdata.aws_iam_policy_document.s3canner_dispatcher_policy: Read complete after 0s [id=815314131][0m
[0m[1maws_cloudwatch_metric_alarm.analyzed_binaries: Refreshing state... [id=hg_s3canner_analyzer_no_analyzed_binaries][0m
[0m[1maws_iam_role_policy.s3canner_dispatcher_policy: Refreshing state... [id=hg_s3canner_dispatcher_role:hg_s3canner_dispatcher_policy][0m
[0m[1mmodule.s3canner_analyzer.aws_cloudwatch_metric_alarm.lambda_throttles[0]: Refreshing state... [id=hg_s3canner_analyzer_throttles][0m
[0m[1mmodule.s3canner_analyzer.aws_cloudwatch_metric_alarm.lambda_errors[0]: Refreshing state... [id=hg_s3canner_analyzer_errors][0m
[0m[1mmodule.s3canner_dispatcher.aws_lambda_function.function[0]: Refreshing state... [id=hg_s3canner_dispatcher][0m
[0m[1mmodule.s3canner_dispatcher.aws_lambda_alias.production_alias[0]: Refreshing state... [id=arn:aws:lambda:eu-central-1:375140005095:function:hg_s3canner_dispatcher:Production][0m
[0m[1maws_lambda_permission.allow_cloudwatch_to_invoke_dispatch: Refreshing state... [id=AllowExecutionFromCloudWatch_hg_s3canner_dispatcher][0m
[0m[1mmodule.s3canner_dispatcher.aws_cloudwatch_metric_alarm.lambda_errors[0]: Refreshing state... [id=hg_s3canner_dispatcher_errors][0m
[0m[1mmodule.s3canner_dispatcher.aws_cloudwatch_metric_alarm.lambda_throttles[0]: Refreshing state... [id=hg_s3canner_dispatcher_throttles][0m
[0m[1maws_cloudwatch_event_target.invoke_dispatch_lambda: Refreshing state... [id=hg_s3canner_dispatch_cronjob-hg_s3canner_dispatch_to_lambda][0m

Terraform used the selected providers to generate the following execution
plan. Resource actions are indicated with the following symbols:
  [33m~[0m update in-place[0m

Terraform will perform the following actions:

[1m  # aws_s3_bucket_notification.lambda_bucket_notification[0m will be updated in-place
[0m  [33m~[0m[0m resource "aws_s3_bucket_notification" "lambda_bucket_notification" {
        id          = "hg.s3canner-binaries.eu-central-1"
        [90m# (2 unchanged attributes hidden)[0m[0m

      [32m+[0m[0m lambda_function {
          [32m+[0m[0m events              = [
              [32m+[0m[0m "s3:ObjectCreated:*",
            ]
          [32m+[0m[0m lambda_function_arn = "arn:aws:lambda:eu-central-1:375140005095:function:hg_s3canner_batcher"
        }

      [31m-[0m[0m queue {
          [31m-[0m[0m events    = [
              [31m-[0m[0m "s3:ObjectCreated:*",
            ] [90m-> null[0m[0m
          [31m-[0m[0m id        = "tf-s3-queue-20230405210000504200000001" [90m-> null[0m[0m
          [31m-[0m[0m queue_arn = "arn:aws:sqs:eu-central-1:375140005095:hg_s3canner_s3_object_queue" [90m-> null[0m[0m
        }
    }

[1mPlan:[0m 0 to add, 1 to change, 0 to destroy.
[0m[0m[1maws_s3_bucket_notification.lambda_bucket_notification: Modifying... [id=hg.s3canner-binaries.eu-central-1][0m[0m
[0m[1maws_s3_bucket_notification.lambda_bucket_notification: Modifications complete after 1s [id=hg.s3canner-binaries.eu-central-1][0m
[33mâ•·[0m[0m
[33mâ”‚[0m [0m[1m[33mWarning: [0m[0m[1mArgument is deprecated[0m
[33mâ”‚[0m [0m
[33mâ”‚[0m [0m[0m  with aws_s3_bucket.s3canner_log_bucket,
[33mâ”‚[0m [0m  on s3.tf line 21, in resource "aws_s3_bucket" "s3canner_log_bucket":
[33mâ”‚[0m [0m  21: resource "aws_s3_bucket" "s3canner_log_bucket" [4m{[0m[0m
[33mâ”‚[0m [0m
[33mâ”‚[0m [0mUse the aws_s3_bucket_versioning resource instead
[33mâ”‚[0m [0m
[33mâ”‚[0m [0m(and 12 more similar warnings elsewhere)
[33mâ•µ[0m[0m
[0m[1m[32m
Apply complete! Resources: 0 added, 1 changed, 0 destroyed.
[0mCloning YARA rules from https://github.com/YARA-Rules/rules.git/['cve_rules']...
yara_filepaths: {'github.com/YARA-Rules/rules.git/cve_rules/CVE-2010-0805.yar': '/home/guru/Praktikum/news3canner/core/rules/github.com/YARA-Rules/rules.git/cve_rules/CVE-2010-0805.yar', 'github.com/YARA-Rules/rules.git/cve_rules/CVE-2018-4878.yar': '/home/guru/Praktikum/news3canner/core/rules/github.com/YARA-Rules/rules.git/cve_rules/CVE-2018-4878.yar', 'github.com/YARA-Rules/rules.git/cve_rules/CVE-2012-0158.yar': '/home/guru/Praktikum/news3canner/core/rules/github.com/YARA-Rules/rules.git/cve_rules/CVE-2012-0158.yar', 'github.com/YARA-Rules/rules.git/cve_rules/CVE-2013-0074.yar': '/home/guru/Praktikum/news3canner/core/rules/github.com/YARA-Rules/rules.git/cve_rules/CVE-2013-0074.yar', 'github.com/YARA-Rules/rules.git/cve_rules/CVE-2018-20250.yar': '/home/guru/Praktikum/news3canner/core/rules/github.com/YARA-Rules/rules.git/cve_rules/CVE-2018-20250.yar', 'github.com/YARA-Rules/rules.git/cve_rules/CVE-2010-0887.yar': '/home/guru/Praktikum/news3canner/core/rules/github.com/YARA-Rules/rules.git/cve_rules/CVE-2010-0887.yar', 'github.com/YARA-Rules/rules.git/cve_rules/CVE-2013-0422.yar': '/home/guru/Praktikum/news3canner/core/rules/github.com/YARA-Rules/rules.git/cve_rules/CVE-2013-0422.yar', 'github.com/YARA-Rules/rules.git/cve_rules/CVE-2016-5195.yar': '/home/guru/Praktikum/news3canner/core/rules/github.com/YARA-Rules/rules.git/cve_rules/CVE-2016-5195.yar', 'github.com/YARA-Rules/rules.git/cve_rules/CVE-2017-11882.yar': '/home/guru/Praktikum/news3canner/core/rules/github.com/YARA-Rules/rules.git/cve_rules/CVE-2017-11882.yar', 'github.com/YARA-Rules/rules.git/cve_rules/CVE-2015-5119.yar': '/home/guru/Praktikum/news3canner/core/rules/github.com/YARA-Rules/rules.git/cve_rules/CVE-2015-5119.yar', 'github.com/YARA-Rules/rules.git/cve_rules/CVE-2015-2426.yar': '/home/guru/Praktikum/news3canner/core/rules/github.com/YARA-Rules/rules.git/cve_rules/CVE-2015-2426.yar', 'github.com/YARA-Rules/rules.git/cve_rules/CVE-2015-1701.yar': '/home/guru/Praktikum/news3canner/core/rules/github.com/YARA-Rules/rules.git/cve_rules/CVE-2015-1701.yar', 'github.com/YARA-Rules/rules.git/cve_rules/CVE-2010-1297.yar': '/home/guru/Praktikum/news3canner/core/rules/github.com/YARA-Rules/rules.git/cve_rules/CVE-2010-1297.yar', 'github.com/YARA-Rules/rules.git/cve_rules/CVE-2015-2545.yar': '/home/guru/Praktikum/news3canner/core/rules/github.com/YARA-Rules/rules.git/cve_rules/CVE-2015-2545.yar'}
Creating analyzer deploy package...
We did extract the nessecary depends and now gonna zip everything /home/guru/Praktikum/news3canner/core/rules/layer.zip
Creating batcher deploy package...
Creating dispatcher deploy package...
Deployment succeeded!
